version: "3.9"

services:
  detector:
    build: ./services/detector
    env_file: ./.env
    volumes:
      - ./common:/home/common
      - ./models:/home/models
    restart: unless-stopped
    deploy:
      mode: replicated
      replicas: 1
  encoder:
    build: ./services/encoder
    env_file: ./.env
    volumes:
      - ./common:/home/common
      - ./models:/home/models
    restart: unless-stopped
    deploy:
      mode: replicated
      replicas: 1